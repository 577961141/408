# C语言详解指针地址及内存管理

## 简介

指针是什么？是一个值，这个值代表一个内存地址。

字符`*`表示指针，通常在类型关键字的后面，表示指针指向的是什么类型的值。比如，`char*` 表示一个指向字符的指针，`float*`表示一个指向`float`类型的值指针。

```c
int *intPtr;
```
上面示例声明了一个变量`intPtr`，它是一个指针，指向的内存地址存放的一个整数。

***指针变量就是普通的变量，只不过它的值是内存地址而已***。

一个指针的指向的可能还是指针，这时就要用两个星号`**`表示.

```c
int** foo;
```
上面示例表示变量`foo`是一个指针，指向的还是一个指针，第二个指针指向的则是一个整数。

## * 运算符

`*`这个符号除了表示指针以外，还可以作为运算符，用来取出指针变量所指向的内存地址里面的值。

```C
void increment(int* p) {
    *p = *p+1;
}
```

上面示例中，函数increment()的参数是一个整数指针p。函数体里面，*p就表示指针p所指向的那个值。对*p赋值，就表示改变指针所指向的那个地址里面的值。

上面函数的作用是将参数值加1。该函数没有返回值，因为传入的是地址，函数体内部对该地址包含的值的操作，会影响到函数外部，所以不需要返回值。事实上，函数内部通过指针，将值传到外部，是 C 语言的常用方法。

## &运算符

`&`运算符用来取出一个变量所在的内存地址。
```c
int x = 1;
priintf("%p", &x);
```

上面示例中，x是一个整数变量，&x就是x的值所在的内存地址。printf()的%p是内存地址的占位符，可以打印出内存地址。

上一小节中，参数变量加1的函数，可以像下面这样使用。

```c
void increment(int *p) {
    *p = *p+1;
}

int x = 1;
increment(&x);
printf("%d\n", x); // 2 
```

上面示例中，调用increment()函数以后，变量x的值就增加了1，原因就在于传入函数的是变量x的地址&x。

&运算符与*运算符互为逆运算，下面的表达式总是成立。

```c
int i = 5;

if (i == *(&i)) // 正确
```