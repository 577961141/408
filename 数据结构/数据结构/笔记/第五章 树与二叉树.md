# 第五章 树与二叉树

## 5.1 树的基本概念

### 5.1.1 树的定义

树是n(n>=0)个结点的有限集，当n=0时称为空树。在任意一棵非空树中应满足：
- 有且仅有一个特定的称为根的结点
- 当n>1时，其余结点可分为m(m>0)个互不相交的有限集T(1),T(2),...,T(m)，其中每个集合本身又是一棵树，并且称为根的子树

树是递归的数据结构。树作为一种逻辑结构，同时也是一种分层结构，具有以下两个特点：
- 树的根结点没有前驱，除根结点没前驱外树的所有结点有且仅有一个前驱
- 树中所有结点的后继可以有零个或者多个

在n个结点的树中有n-1条边

### 5.1.2 基本术语

![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307100848226.png)

- 略
- 略
- 度大于0的结点称为分支结点（又称非终端结点）；度为0（没有子女结点）的结点称为叶结点（又称终端结点）。在分支结点中。每个结点的分支数就是该结点的度。
- 结点的深度、高度和层次
  - 结点的层次从根开始定义，根结点为第1层，它的子结点为第2层
  - 结点的深度是从根结点开始自顶向下逐层累加的
  - 结点的高度是从叶结点开始自底向上逐层累加的
  - 树的高度（或深度）是树中结点的最大层数
- 有序树和无序树。树中结点各个子树从左到右是有序的，不能互换，称该树为有序树，否则为无序树。
- 路径和路径长度。树中两个结点之间的路径是由两个结点之间所经过的结点序列构成的，而路径长度是路径上所经过的边的个数（注意：由于树中的分支是有向的，即从双亲指向孩子，所以树中的路径是从上向下同一双亲的两个孩子之间不存在路径。）
- 森林。森林是m（m>=0）棵互不相交的树的集合。森林的概念与树的概念十分接近，因为只要吧树的根结点删除了就变成了森林。反之，只要给m棵独立的树加上一个结点，并把这m棵树做为该结点的子树，则森林就变成了树。

### 5.1.3 树的性质

- 树中的结点数等于所有结点的度数之和加一
- 度为m的树中第i层上至多有m^(i-1)个结点（i>=1）
- 高度为h的m叉树至多有(m^(h)-1)/(m-1)个结点
- 具有n个结点的m叉树的最小高度为（看书）

### 5.1.4 本节试题精选 

一、单项选择

```
1. D
2. A
3. C(A)
4. A
5. A
6. C
7. B
```

## 5.2 二叉树的概念

### 5.2.1 二叉树的定义及其主要特性

1. 二叉树的定义

    二叉树是一种特殊的树形结构，其特点是每个结点至多只有两棵子树（即二叉树中不存在大于2的结点），并且二叉树的子树有左右之分，其次序不能任意颠倒。

    与树相似，二叉树也是以递归的形式定义，二叉树是由n（n>=0）个有限结点组称的集合
    - 二叉树可以为空树，即n=0
    - 二叉树可以由一个根结点和两个互不相交的称为根的左子树和右子树组成，左子树和右子树又分别是一棵二叉树。

    二叉树是有序树，其左右子树如果颠倒，就不再是原来的二叉树。即使树中结点只有一棵树，也要区分是左子树还是右子树，如下图，二叉树的五种形态。

    ![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307130818921.png)

    二叉树与度为2的有序树的区别：

   - 度为2的有序树至少有三个结点，而二叉树可以为空树
   - 度为2的有序树的孩子的左右次序是相对于另一个孩子而言的，如果某个结点只有一个孩子，那么就不用区分左右次序。而二叉树不管其孩子数是否为2，均需要确定其左右次序，即二叉树的结点次序不是相对于另一结点而言，而是确定的。

2. 几个特殊的树

   - 满二叉树。一棵高度为h，且含有2^h-1个结点的二叉树称为满二叉树，即树中的每层都含有最多的结点，如下图所示
     ![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307130842173.png)
  
     满二叉树的叶结点都集中在二叉树的最下一层，并且除叶结点之外的每个结点度数均为2。

     若对满二叉树进行编号，从上往下，从左往右，如果某个结点的编号为i，如果这个结点有双亲，那么这个双亲的编号为i/2（向下取整），其左孩子编号为2i，右孩子编号为2i+1
   - 完全二叉树。高度为h、有n个结点的二叉树，当且仅当其每个结点都与高度为h的满二叉树中编号为1～n的结点一一对应时，称为完全二叉树，如下图所示。其特点如下：

     ![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307130853397.png)

     - 若i<=n/2(向下取整)，则结点i为分支结点，否则为叶结点
     - 叶结点只可能在层次最大的两层上出现。对于最大层次中的叶结点，都依次排在该层最左边位置上。
     - 若有度为1的结点，则只可能有一个，且该结点只有左孩子而无右孩子
     - 按照层序编号后，如果某个结点i为叶子结点或者只有左子树的结点，那么大于i的编号结点，都为叶结点
     - 如果n为奇数，则每个分支结点都有左右孩子；若n为偶数，则编号最大的分支结点（编号n/2）只有左孩子，没有右孩子，其余分支结点左右孩子都有

   - 二叉排序树：左子树上的所有结点的关键字均小于根结点的关键字；右子树上的所有结点的关键字均大于根结点的关键字；左子树和右子树又各是一棵二叉排序树。
   - 平衡二叉树：树上任意一个结点的左子树和右子树的深度之差不超过1。
3. 二叉树的性质
   - 非空二叉树的叶子结点数等于度为2的结点数+1。（证明过程看书）
   - 非空二叉树上第k层至多有2^(k-1)个结点
   - 高度为h的二叉树至多有2^h-1个结点（h>=1）
   - 对完全二叉树按从上到下、从左往右的顺序依次编号1，2，...，n，则有以下关系
     - 当i>1时，结点i的双亲编号为i/2（向下取整），即当结点i为偶数时，其双亲编号为i/2，结点i是其左孩子，当结点i为奇数时，其双亲编号为(i-1)/2，结点i是其右孩子
     - 当2i<=n时，结点i的左孩子编号为2i，否则无左孩子
     - 当2i+1<=n时，结点i的右孩子编号为2i+1，否则无右孩子
     - 结点i所在层次（深度）为log2i（向下取整）+1
   - 具有n个(n>0)结点的完全二叉树的高度为log2（n+1）（向上取整）或log2n（向下取整）+1（证明过程看书）

### 5.2.2 二叉树的存储结构

1. 顺序存储结构

    二叉树的顺序存储就是用一组连续的存储单元依次自上而下、自左至右存储完全二叉树上的结点元素，即将完全二叉树上的编号为i的结点元素存储在一维数组下标为i-1的分量中

    依据二叉树的性质，完全二叉树和满二叉树采用顺序存储比较合适，树中结点序号可以唯一地反映结点之间的逻辑关系，这样既能最大可能地节省存储空间，又能利用数组元素的下标值确定结点在二叉树中的位置，以及结点之间的关系

    但对于一般的二叉树，为了让数组下标能反映二叉树中结点之间的逻辑关系，只能添加一些并不存在的空结点，让其每个结点与完全二叉树上的结点相对应，再存储到一维数组的相应分量中。然而，再最坏的情况下，一个高度h且只有h个结点的单支树却需要占据近`2^h-1`个存储单元

    注意：这种存储结构建议从下标1开始存储树中的结点，若从数组下标0开始存储，则不满足性质4的描述
2. 链式存储结构

    由于顺序存储的空间利用率比较低，因此二叉树一般采用链式存储结构。在二叉树中，结点结构通常是若干个数据域和若干个指针域，二叉链表至少包含3个域：数据域data、左指针域lchild、右指针域rchild。如下图所示

   ![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307170851008.png)。

    下图为二叉链表的存储结构

   ![](https://cdn.jsdelivr.net/gh/577961141/static@master/202307170854239.png)

    还可以增加一些指针域，如指向父节点的指针域，变为了三叉链表的存储结构。

    二叉树的链式存储结构描述如下：

    ```
        typedef struct BiTNode {
             ElemType  data;
             struct BiTNode *lchild, *rchild;
        }BiTNode, *BiTree;
    ```
   
    *在n个结点的二叉链表中，含有n+1个空域链*（重要结论）

### 5.2.3 本节试题精选

一、单项选择

```
1. C
2. A
3. B
4. D
5. C
6. C
7. C
8. B
9. C
10. A
11. A
12. D
13. C
14. B
15. B
16. A
17. C
18. D
19. D
20. C
21. A
22. B
```

二、 综合应用题

```
1. 在非空二叉树中，由度为0和度为2的结点之间的关系n0 = n2 + 1，可知n2 = n0 - 1。因此总结点数 n = n0+n1+n2=2n0+n1-1.（后半部分的解释看书）
2. 在满二叉树中，n1=0，由二叉树的性质1可知n0=n2+1,那么n2=n0-1，二叉树的结点数n=n0+n1+n2，那么叶子结点数为n0+n0-1=n-0，即叶子结点数为n0=(n+1)/2,分支结点数为n2=n-(n+1)/2=(n-1)/2.高度为h的满二叉树的结点数n=2^h-1,即高度为h=log2(n+1)
```